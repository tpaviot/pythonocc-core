language: cpp
compiler:
  - gcc
  - clang
before_install:
# following ppa contains oce-0.16.0
   - sudo add-apt-repository "deb http://ppa.launchpad.net/freecad-maintainers/oce-release/ubuntu precise main" -y
   - sudo apt-get update -q
   - sudo apt-get install liboce-ocaf-dev oce-draw
   - sudo apt-get install python-wxgtk2.8
   - sudo python -c "import wx"
   - sudo apt-get install python-qt4 python-qt4-gl
   - sudo python -c "from PyQt4 import QtGui, QtCore, QtOpenGL"
   - sudo apt-get install python-pyside
   - sudo python -c "from PySide import QtGui, QtCore, QtOpenGL"
# and this one python3.4 for ubuntu precise
   - sudo add-apt-repository "deb http://ppa.launchpad.net/fkrull/deadsnakes/ubuntu precise main" -y
   - sudo apt-get update
   - sudo apt-get install python3.4
   - sudo apt-get install python3.4-dev
# gfortran is necessary for smesh to compile
   - sudo apt-get install gfortran
before_script:
# download/build/install swig-3.0.2
  - curl -L http://prdownloads.sourceforge.net/swig/swig-3.0.2.tar.gz | tar zx
  - cd swig-3.0.2
  - ./configure
  - make -j6 && sudo make install
  - cd ..
  - swig -version
# download/build/install smesh-6.5.3.1
  - curl -L https://github.com/tpaviot/smesh/tarball/6.5.3.1 | tar zx
  - cd tpaviot-smesh-49d0d6c
  - mkdir cmake-build
  - cd cmake-build
  - cmake ..
  - sudo make -j6 install | grep Built
  - cd ../..
  
script: ./.travis.build.sh
after_script:
branches:
  only:
    - master
    - /^review/
